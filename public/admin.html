<!DOCTYPE html>
<html lang="tr">
<head><meta charset="UTF-8"><title>Admin</title></head>
<body>
  <h2>Admin Paneli</h2>
  <form id="saveForm">
    <label>Sipari≈ü ID: <input name="id" required></label><br><br>
    <textarea name="steps" rows="10" cols="40" placeholder="1 - 93\n2 - 201"></textarea><br><br>
    <button type="submit">Kaydet</button>
  </form>
  <script>
    document.getElementById('saveForm').addEventListener('submit',async e=>{
      e.preventDefault();
      const id=e.target.id.value;
      const raw=e.target.steps.value.trim().split(/\n/);
      const steps=raw.map(line=>{
        const parts=line.split('-').map(x=>x.trim());
        return {step:parseInt(parts[0]),notch:parseInt(parts[1])};
      });
      await fetch('/api/admin/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id,steps})});
      alert('Kaydedildi');
    });
  </script>
</body>
</html>